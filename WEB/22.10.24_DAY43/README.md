# 2022.10.24. MON ğŸ“…
----------------
<br>

## 1.  JSP ê¸°ë³¸ ê°œì²´ì™€ ì˜ì—­âœ”
![image](https://dthumb-phinf.pstatic.net/?src=%22https%3A%2F%2Fcafeptthumb-phinf.pstatic.net%2F20160902_28%2Fi7027_1472798865059QEztp_PNG%2F%25C5%25AC%25B6%25F3%25C0%25CC%25BE%25F0%25C6%25AE%25BC%25AD%25B9%25F6_1.PNG%3Ftype%3Dw740%22&type=cafe_wa740)
![image](https://dthumb-phinf.pstatic.net/?src=%22http%3A%2F%2Fcafeptthumb4.phinf.naver.net%2F20150930_15%2Fi7027_1443569926164haD3C_PNG%2F%25BF%25B5%25BF%25AA.PNG%3Ftype%3Dw740%22&type=cafe_wa740)
<br>

## 2.  Cookie âœ”
### ğŸ”” Cookie Basic
```jsp
   ì •ë³´(ìë£Œ)ë°ì´í„° > ì €ì¥ > ì¥ì†Œ(where)
   
   [ì›¹ì´ë¼ëŠ” ê´€ì ]ì— ë°ì´í„° ì–´ëŠ ì¥ì†Œì— ì €ì¥
   
   í´ë¼ì´ì–¸íŠ¸(ê°œì¸ Local PC)   : ì„œë²„(ì›¹ì„œë²„ or DBì„œë²„)
   
   ì–´ë””ì— ì €ì¥(ë³´ê´€)
   ê³ ë¯¼ (ê¸°ì¤€ì ): ë³´ì•ˆìš”ì†Œ(ë°ì´í„° ì¤‘ìš”ì„±), ì†Œë©¸(ì¼ì‹œì , ì˜ì†ì )
   
   ë³´ì•ˆ: í´ë¼ì´ì–¸íŠ¸ëƒ ì„œë²„ëƒ
   ì†Œë©¸: ë©”ëª¨ë¦¬ì™€ DB or íŒŒì¼
   
   Client (Local PC : ì›¹ë¸Œë¼ìš°ì €)
   1. Cookie (ë©”ëª¨ë¦¬ ì¿ í‚¤ & íŒŒì¼ ì¿ í‚¤(local ë””ìŠ¤í¬ì— txt ì €ì¥ > ì•”í˜¸í™” )) >> ì†Œë©¸ì‹œê¸°
   	  ë‹¨ì ) í¬ê¸° ì œì•½ì (4096byte), ë³´ì•ˆ(ì‚¬ìš©ì ì‚­ì œ..ì•”í˜¸í™” í•´ë… í•´ì»¤ê°€...)
   2. Local Storage(key, value) í˜•íƒœ
  	  ì¥ì ) í¬ê¸°, value(ê°ì²´ ì‚¬ìš© ê°€ëŠ¥ : JSON)
  	  
   Server (ì›¹ì„œë²„(WAS)(ë©”ëª¨ë¦¬) + DBì„œë²„)
   1. server memory : session ê°ì²´ (ì‚¬ì´íŠ¸ ì ‘ì†í•˜ëŠ” ì‚¬ìš©ìë§ˆë‹¤ ê³ ìœ í•˜ê²Œ ë¶€ì—¬í•˜ëŠ” ë©”ëª¨ë¦¬(ê°ì²´)) > ì„œë²„ ë¦¬ë¶€íŒ…, ê°œë°œì½”ë“œ ë³€ê²½ > ì†Œë©¸ > ìƒì„±
   2. server memory : application ê°ì²´
   3. server ì˜ì†ì  : íŒŒì¼.txt(ê´€ë¦¬ê°€ í˜ë“¤ì–´ìš”)
   4. DB server : ë³´ì•ˆ, ì˜ì†ì ì¸ ë°ì´í„° ê´€ë¦¬ >> ë¹„ìš©ì€ ì¶”ê°€ >> í´ë¼ìš°ë“œ ì‚¬ìš©
```
```jsp
 <%
	 Cookie mycookie = new Cookie("cname", "1004");
	 //ì„œë²„ ì¿ í‚¤ ê°ì²´ ìƒì„±
	 //ë‚´ ì›¹ ì„œë²„ì— ì ‘ì†í•œ ë¸Œë¼ìš°ì €(client)ì—ê²Œ cookie ì „ë‹¬(write) >> response
 	
 	response.addCookie(mycookie); //í•œì¤„ë¡œ ...
 %>
 <a href = "Ex16_Cookie_read.jsp">Cookie read</a>
```
<br>

### ğŸ”” Cookie Read
```jsp
<%
	Cookie[] cs = request.getCookies();
	//ì›¹ë¸Œë¼ìš°ì €ê°€ ê°€ì§€ëŠ” ëª¨ë“  ì¿ í‚¤ë“¤ì„ ë‹¤ ê°€ì§€ê³  ì™€ì„œ
	if(cs != null || cs.length > 0) {
		//ê°œë°œì ë§ˆìŒ
		for(Cookie c : cs) {
			out.print("c.getName : " + c.getName() + "<br>");
			out.print("c.getValue : " + c.getValue() + "<br>");
			out.print("c.getMaxAge : " + c.getMaxAge() + "<br>"); //-1 (ì†Œë©¸ì‹œê°„ì´ ì—†)
			out.print("c.getDomain : " + c.getDomain() + "<br>");
			out.print("<hr>");
		}
	}
%>

```
<br>

### ğŸ”” Cookie File
- ë©”ëª¨ë¦¬ ì¿ í‚¤ (ë¸Œë¼ìš°ì €) : client ê°•ì œë¡œ ì§€ìš°ì§€ ì•ŠëŠ” í•œ ... ë¸Œë¼ìš°ì €ê°€ ë‹«ê¸° ì „ê¹Œì§€ ìœ íš¨
- -> ì†Œë©¸íƒ€ì… : getMaxAge() >> -1
- íŒŒì¼ ì¿ í‚¤ (ì†Œë©¸ì‹œê°„ì„ ê°€ì§€ê³  ìˆìŒ) : clientê°€ ê°•ì œë¡œ ì§€ìš°ì§€ ì•ŠëŠ” í•œ ì •í•´ì§„ ì‹œê°„ê¹Œì§€ ìœ íš¨(2050ë…„ 12ì›” 12ì¼)
- -> setMaxAge(60) >> 60ì´ˆ ë’¤ì— ì†Œë©¸

30ì¼  
(30*24*60*60)ì¼ * ì‹œê°„ * ë¶„ * ì´ˆ  
setMaxAge(30*24*60*60)  
```jsp
<%
Cookie co = new Cookie("kosa", "hong");
co.setMaxAge(30*24*60*60); //30ì¼
response.addCookie(co);
%>
```
<br>

## 3.  Session âœ”
#### < Server (ì›¹ì„œë²„(WAS)(ë©”ëª¨ë¦¬) + DBì„œë²„) > 
- server memory : session ê°ì²´ (ì‚¬ì´íŠ¸ ì ‘ì†í•˜ëŠ” ì‚¬ìš©ìë§ˆë‹¤ ê³ ìœ í•˜ê²Œ ë¶€ì—¬í•˜ëŠ” ë©”ëª¨ë¦¬(ê°ì²´)) > ì„œë²„ ë¦¬ë¶€íŒ…, ê°œë°œì½”ë“œ ë³€ê²½ > ì†Œë©¸ > ìƒì„±
- server memory : application ê°ì²´
```
session ê°ì²´ : ì„œë²„(web)ì•  ì ‘ì†í•œ ì‚¬ìš©ìë§ˆë‹¤ ê³ ìœ í•˜ê²Œ ë¶€ì—¬ë˜ëŠ” ê°ì²´ 
ê³ ìœ ì„± ë³´ì¥(keyê°’) >> ê°ê°ì˜ session ê°ì²´ë§ˆë‹¤ ì´ë¦„í‘œ > keyê°’ > í´ë¼ì´ì–¸íŠ¸ì—ë„ ì „ë‹¬ 
í™œìš©) í´ë¼ì´ì–¸íŠ¸ë§ˆë‹¤ ê³ ìœ í•˜ê²Œ ë¶€ì—¬ (session ê°ì²´)
>> ë¡œê·¸ì¸ ì—¬ë¶€, ì¥ë°”êµ¬ë‹ˆ, ì‚¬ìš©ìì˜ ì •ë³´(ê°ê° ë‹¤ë¥¸ ì •ë³´), ì‚¬ìš©ìë§ˆë‹¤ ì ‘ì†í•œ ì‹œê°„, ë§ˆì§€ë§‰ ì ‘ì† ì‹œê°„
```
- http://localhost:8090/WebJSP/Ex18_Session.jsp ì„œë²„ì— ìš”ì²­ ë³´ë‚´ê¸°
- session ID (keyê°’) ìƒì„±ë¨ -> session -> sessionID response í•´ìš”(cookie)
- -> JSESSIONID : 36EE35EDAF566BEA0C46F6E266E6C8E0
- ë™ê¸°í™” (ë„ˆë‘ ë‚˜ë‘ ì¹œêµ¬ë‹¤)
- ex) ì ‘ì†ì 1000ëª…ì´ Web Serverì—ëŠ” key 1000ê°œ ë§Œë“¤ì–´ì§€ê³  key ì´ë¦„í‘œë¡œ ë‹¬ê³ ìˆëŠ” session ê°ì²´ë„ 1000ê°œ ìƒì„±
- ex) Client ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ í´ë¦­ >> ì„œë²„ëŠ” ì–´ë– í•œ ì‘ì—…ì„ ìˆ˜í–‰ í• ê¹Œìš”? >> ë¡œê·¸ì•„ì›ƒ íŒë‹¨ >> key ê°€ì§€ê³  ì™€ì„œ key(ì´ë¦„í‘œ) > ê°ì²´ë¥¼ ì°¾ì•„ì„œ abandon >> invalidate
```
 1. session ê°ì²´(ì‚¬ìš©ìë§ˆë‹¤ ë¶€ì—¬ë˜ëŠ” ê³ ìœ í•œ ê°ì²´)
    >> ì ‘ì†í•˜ëŠ” ë¸Œë¼ìš°ì €ë§ˆë‹¤ (sessionID)ì„ ê°€ì§€ê³  ê°ì²´ ê´€ë¦¬
    >> ì ‘ì†í•œ ì‚¬ìš©ì ë§ˆë‹¤ ê³ ìœ í•œ ë³€ìˆ˜ ë§Œë“¤ê¸° .....
    >> session.setAttribute("id",request.getParameter("userid")); 
    
    ì ‘ì†ì 3ëª…
    
    ê¹€ìœ ì‹  : ì„œë²„ê°ì²´ ìƒì„±(session) : ì‹ë³„ê°’ : A1 : ìƒì„±ëœ session ê°ì²´(ë³€ìˆ˜, ê°’)
    -sessionê°ì²´ (id,kim)
    
    ì´ìˆœì‹  : ì‹ë³„ê°’ : A2
    -session ê°ì²´ (id,Lee)
    
    .. ë“±ë“± .....

```
<br>